



<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>
      
Helm | Docs

    </title>

    







<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0">


<meta name="description" content="Helm - The Kubernetes Package Manager.">


<meta property="og:title" content="常见问答(FAQ)">
<meta property="og:title" content="常见问答(FAQ)">
<meta property="og:url" content="https://helm.sh/zh/docs/faq/">
<meta property="og:description" content="Helm - The Kubernetes Package Manager." />

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://helm.sh/img/og-image.png">
<meta name="twitter:title" content="Helm | 常见问答(FAQ)">
<meta name="twitter:description" content="Helm - The Kubernetes Package Manager.">

<meta name="google-site-verification" content="dCa3wS47cErhx0IpaxbB85NfcOP-vFxevknVk6fzf5I">

<link rel="icon" href="https://helm.sh/img/favicon-152.png" type="image/x-icon">
<link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-precomposed.png">














<link rel="stylesheet" href="/css/style.bb9a3f16cd8b057bc29c79565ae0d4a0d40d2088a9939d614209a479d640b7bb.css" integrity="sha256-u5o/Fs2LBXvCnHlWWuDUoNQNIIipk51hQgmkedZAt7s=">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />




<link rel="alternate" type="application/rss+xml" href="https://helm.sh/zh/docs/faq/index.xml" title="Helm" />


  </head>

  
    <body id="landing" class="zh"></body>
  
    


<div id="helm" class="page-docs page-wrapper page-docs-list">
  <header>
    
    



<nav class="navbar navbar-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid is-vcentered">
    <div class="navbar-brand">
      <a href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 304 351"><title>Helm</title>
<mask id="a" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<mask id="b" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<g fill="none" fill-rule="evenodd" transform="translate(-11 -51)">
<path d="m11.6785714 189h19.7858357v26.789h23.9037v-26.789h19.7858358v75.25h-19.7858358v-28.695333h-23.9037v28.695333h-19.7858357zm86.1738429 75.25v-75.25h46.8030427v16.354333h-27.017207v12.240667h23.9037v16.655333h-23.9037v13.846h27.017207v16.153667zm68.4971567 0v-75.25h19.785836v55.384h27.117643v19.866zm77.536372-75.25 30.733328 27.892667 30.632893-27.892667h8.938779v75.25h-19.886272v-38.628333l-19.6854 17.959666-19.785835-17.859333v38.528h-19.886272v-75.25z" fill="#0f1689"/>
<g transform="matrix(1 0 0 -1 11.958136 455)">
<g fill="#0f1689" mask="url(#a)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -51.706556)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 47.704768)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 53.670762)"/>
</g>
<path d="m251.467006 173.099849c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.245901-97.0586959 53.334588m2.1981107 129.169534c20.8403036 30.232701 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865887 94.974049-50.191495" mask="url(#a)" stroke="#0f1689" stroke-width="20"/>
</g>
<g transform="translate(11.958136)">
<g fill="#0f1689" mask="url(#b)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -54.166016)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 45.245308)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 51.211302)"/>
</g>
<path d="m251.467006 170.64039c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.2459-97.0586959 53.334587m2.1981107 129.169534c20.8403036 30.232702 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865886 94.974049-50.191494" mask="url(#b)" stroke="#0f1689" stroke-width="20"/>
</g>
</g>
</svg>
      </a>
    </div>

    
    <div class="navbar-menu is-centered" id="navMenuDocumentation">
      
        
          <a href="/zh/" class="navbar-item">
            首页
          </a>
        
      
        
          <a href="/zh/docs" class="navbar-item">
            文档
          </a>
        
      
        
          <a href="https://hub.helm.sh/" class="navbar-item external" target="_blank">
            应用中心 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://helm.sh/blog" class="navbar-item external" target="_blank">
            博客 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://github.com/helm/community" class="navbar-item external" target="_blank">
            社区 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
    </div>

    <div class="navbar-end is-hidden-mobile">
      <ul class="is-pulled-right">
        





  <li class="versioner l18ner navbar-item has-dropdown is-right is-hoverable">
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      中文 <i class="fa fa-caret-down"></i>
    </a>

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      
      
          
          
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/docs/faq/"><code>en</code> &nbsp; English</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/de/docs/faq/"><code>de</code> &nbsp; Deutsch</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/ja/docs/faq/"><code>ja</code> &nbsp; 日本語</a></li>
                
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/ko/docs/faq/"><code>ko</code> &nbsp; 한국어</a></li>
                
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/zh/docs/faq/" class="active"><code>zh</code> &nbsp; 中文</a></li>
                
              

            
      
      <li class="navbar-item l18n-prompt"><a href="https://github.com/helm/helm-www#internationalization--translation"><small>翻译这个页面</small></a></li>
    </ul>
  </li>
  

        




  <li class="versioner navbar-item has-dropdown is-right is-hoverable">
    
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      v3.13.0 <i class="fa fa-caret-down"></i>
    </a>
    

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      <li>
        <a href="https://helm.sh/docs" class="navbar-item">
          v3.13.0 <em>stable</em>
        </a>
      </li>
      
      <li>
        <a href="https://v2.helm.sh/docs" class="navbar-item">
          v2.17.0
        </a>
      </li>
      
    </ul>
  </li>

        <li class="">
          <a class="button not-fixed is-outlined" href="/zh/docs/intro/quickstart">从这里开始</a>
        </li>
      </ul>
    </div>

    
    <div class="navbar-end is-hidden-tablet">
      <div id="navbarBurger" class="navbar-burger burger" data-target="navMenuDocumentation">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
</nav>

    



<nav class="navbar navbar-top navbar-top-fixed" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    
    <div class="navbar-brand">
      <a href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 304 351"><title>Helm</title>
<mask id="a" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<mask id="b" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<g fill="none" fill-rule="evenodd" transform="translate(-11 -51)">
<path d="m11.6785714 189h19.7858357v26.789h23.9037v-26.789h19.7858358v75.25h-19.7858358v-28.695333h-23.9037v28.695333h-19.7858357zm86.1738429 75.25v-75.25h46.8030427v16.354333h-27.017207v12.240667h23.9037v16.655333h-23.9037v13.846h27.017207v16.153667zm68.4971567 0v-75.25h19.785836v55.384h27.117643v19.866zm77.536372-75.25 30.733328 27.892667 30.632893-27.892667h8.938779v75.25h-19.886272v-38.628333l-19.6854 17.959666-19.785835-17.859333v38.528h-19.886272v-75.25z" fill="#0f1689"/>
<g transform="matrix(1 0 0 -1 11.958136 455)">
<g fill="#0f1689" mask="url(#a)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -51.706556)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 47.704768)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 53.670762)"/>
</g>
<path d="m251.467006 173.099849c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.245901-97.0586959 53.334588m2.1981107 129.169534c20.8403036 30.232701 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865887 94.974049-50.191495" mask="url(#a)" stroke="#0f1689" stroke-width="20"/>
</g>
<g transform="translate(11.958136)">
<g fill="#0f1689" mask="url(#b)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -54.166016)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 45.245308)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 51.211302)"/>
</g>
<path d="m251.467006 170.64039c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.2459-97.0586959 53.334587m2.1981107 129.169534c20.8403036 30.232702 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865886 94.974049-50.191494" mask="url(#b)" stroke="#0f1689" stroke-width="20"/>
</g>
</g>
</svg>
      </a>
    </div>

    
    <div class="navbar-menu is-centered" id="navMenuDocumentation">
      
        
          <a href="/zh/" class="navbar-item">
            首页
          </a>
        
      
        
          <a href="/zh/docs" class="navbar-item">
            文档
          </a>
        
      
        
          <a href="https://hub.helm.sh/" class
          ="navbar-item external" target="_blank">
            应用中心 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://helm.sh/blog" class
          ="navbar-item external" target="_blank">
            博客 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://github.com/helm/community" class
          ="navbar-item external" target="_blank">
            社区 <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
    </div>

    <div class="navbar-end is-hidden-mobile">
      <ul class="is-pulled-right">
        





  <li class="versioner l18ner navbar-item has-dropdown is-right is-hoverable">
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      中文 <i class="fa fa-caret-down"></i>
    </a>

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      
      
          
          
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/docs/faq/"><code>en</code> &nbsp; English</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/de/docs/faq/"><code>de</code> &nbsp; Deutsch</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/ja/docs/faq/"><code>ja</code> &nbsp; 日本語</a></li>
                
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/ko/docs/faq/"><code>ko</code> &nbsp; 한국어</a></li>
                
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://helm.sh/zh/docs/faq/" class="active"><code>zh</code> &nbsp; 中文</a></li>
                
              

            
      
      <li class="navbar-item l18n-prompt"><a href="https://github.com/helm/helm-www#internationalization--translation"><small>翻译这个页面</small></a></li>
    </ul>
  </li>
  

        




  <li class="versioner navbar-item has-dropdown is-right is-hoverable">
    
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      v3.13.0 <i class="fa fa-caret-down"></i>
    </a>
    

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      <li>
        <a href="https://helm.sh/docs" class="navbar-item">
          v3.13.0 <em>stable</em>
        </a>
      </li>
      
      <li>
        <a href="https://v2.helm.sh/docs" class="navbar-item">
          v2.17.0
        </a>
      </li>
      
    </ul>
  </li>

        <li>
          <a class="button not-fixed is-outlined" href="/zh/docs/intro/quickstart">从这里开始</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  </header>

  <div class="columns" id="helm">
    <aside class="column is-narrow is-gapless sidebar-wrapper">
      

<input type="checkbox" class="hamburger-trigger" />
<small class="hamburger">
  <span></span>
  <span></span>
  <span></span>
</small>

<div class="sidebar">
  <div class="is-visible-mobile is-hidden-tablet" id="sidebar-toggle">Browse Docs <span class="icon"><i class="mdi mdi-arrow-down"></i></span></div>

  <div class="sidebar-content-wrapper">
    <div class="search-container">
      <input id="q" placeholder="Search..." autofocus>
      <span class="icon"><i class="mdi mdi-magnify"></i></span>
    </div>

    
    <nav class="sidebar-nav">

      <ul class="current sidebar-main">
        <li class="sidebar-nav-item toctree-l1">
          <a class="reference internal" href="/zh/docs/" state="">
            <span class="ripple">
              文档首页
            </span>
          </a>
        </li>

        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/intro/">
    <span class="ripple">
      介绍
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/intro/quickstart/" title="Switch to 快速入门指南">
        快速入门指南
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/intro/install/" title="Switch to 安装Helm">
        安装Helm
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/intro/using_helm/" title="Switch to 使用Helm">
        使用Helm
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/intro/cheatsheet/" title="Switch to ">
        
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/howto/">
    <span class="ripple">
      如何使用
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/howto/charts_tips_and_tricks/" title="Switch to chart开发提示和技巧">
        chart开发提示和技巧
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/howto/chart_repository_sync_example/" title="Switch to 同步你的Chart仓库">
        同步你的Chart仓库
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/howto/chart_releaser_action/" title="Switch to Chart发布操作用以自动化GitHub的页面Chart">
        Chart发布操作用以自动化GitHub的页面Chart
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/topics/">
    <span class="ripple">
      主题
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/charts/" title="Switch to Chart">
        Chart
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/charts_hooks/" title="Switch to Chart Hook">
        Chart Hook
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/chart_tests/" title="Switch to Chart Test">
        Chart Test
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/library_charts/" title="Switch to 库类型Chart">
        库类型Chart
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/provenance/" title="Switch to Helm来源和完整性">
        Helm来源和完整性
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/chart_repository/" title="Switch to Chart仓库指南">
        Chart仓库指南
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/registries/" title="Switch to 使用基于OCI的注册中心">
        使用基于OCI的注册中心
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/architecture/" title="Switch to Helm 架构">
        Helm 架构
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/advanced/" title="Switch to Helm高级技术">
        Helm高级技术
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/kubernetes_distros/" title="Switch to Kubernetes分发指南">
        Kubernetes分发指南
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/rbac/" title="Switch to 基于角色的访问控制">
        基于角色的访问控制
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/plugins/" title="Switch to Helm插件指南">
        Helm插件指南
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/v2_v3_migration/" title="Switch to Helm v2 迁移到 v3">
        Helm v2 迁移到 v3
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/version_skew/" title="Switch to Helm版本支持策略">
        Helm版本支持策略
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/permissions_sql_storage_backend/" title="Switch to SQL存储后端的权限管理">
        SQL存储后端的权限管理
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/release_policy/" title="Switch to 发布计划策略">
        发布计划策略
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/topics/kubernetes_apis/" title="Switch to 弃用的 Kubernetes API">
        弃用的 Kubernetes API
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/chart_best_practices/">
    <span class="ripple">
      最佳实践
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/conventions/" title="Switch to 一般惯例">
        一般惯例
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/values/" title="Switch to values">
        values
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/templates/" title="Switch to 模板">
        模板
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/dependencies/" title="Switch to 依赖">
        依赖
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/labels/" title="Switch to 标签和注释">
        标签和注释
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/pods/" title="Switch to pod和pod模板">
        pod和pod模板
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/custom_resource_definitions/" title="Switch to 自定义资源">
        自定义资源
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_best_practices/rbac/" title="Switch to 基于角色的访问控制">
        基于角色的访问控制
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/chart_template_guide/">
    <span class="ripple">
      Chart 模板指南
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/getting_started/" title="Switch to 从这里开始吧">
        从这里开始吧
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/builtin_objects/" title="Switch to 内置对象">
        内置对象
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/values_files/" title="Switch to Values 文件">
        Values 文件
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/functions_and_pipelines/" title="Switch to 模板函数和流水线">
        模板函数和流水线
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/function_list/" title="Switch to 模板函数列表">
        模板函数列表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/control_structures/" title="Switch to 流控制">
        流控制
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/variables/" title="Switch to 变量">
        变量
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/named_templates/" title="Switch to 命名模板">
        命名模板
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/accessing_files/" title="Switch to 在模板内部访问文件">
        在模板内部访问文件
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/notes_files/" title="Switch to 创建一个NOTES.txt文件">
        创建一个NOTES.txt文件
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/subcharts_and_globals/" title="Switch to 子chart和全局值">
        子chart和全局值
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/helm_ignore_file/" title="Switch to .helmignore 文件">
        .helmignore 文件
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/debugging/" title="Switch to 调试模板">
        调试模板
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/wrapping_up/" title="Switch to 下一步">
        下一步
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/yaml_techniques/" title="Switch to 附录： YAML技术">
        附录： YAML技术
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/chart_template_guide/data_types/" title="Switch to 附录：Go 数据类型和模板">
        附录：Go 数据类型和模板
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/helm/">
    <span class="ripple">
      Helm 命令行
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_delete/" title="Switch to ">
        
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_init/" title="Switch to ">
        
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_inspect/" title="Switch to ">
        
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm/" title="Switch to Helm">
        Helm
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_install/" title="Switch to Helm 安装">
        Helm 安装
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_version/" title="Switch to Helm 版本">
        Helm 版本
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_package/" title="Switch to Helm 包">
        Helm 包
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_env/" title="Switch to Helm 变量">
        Helm 变量
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_completion/" title="Switch to Helm 补全">
        Helm 补全
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo/" title="Switch to Helm 仓库">
        Helm 仓库
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo_update/" title="Switch to Helm 仓库更新">
        Helm 仓库更新
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo_list/" title="Switch to Helm 仓库列表">
        Helm 仓库列表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo_index/" title="Switch to Helm 仓库索引">
        Helm 仓库索引
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_test/" title="Switch to Helm 测试">
        Helm 测试
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_plugin/" title="Switch to Helm 插件">
        Helm 插件
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_plugin_install/" title="Switch to Helm 插件安装">
        Helm 插件安装
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_plugin_list/" title="Switch to Helm 插件列表">
        Helm 插件列表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_plugin_update/" title="Switch to Helm 插件升级">
        Helm 插件升级
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_plugin_uninstall/" title="Switch to Helm 插件卸载">
        Helm 插件卸载
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_rollback/" title="Switch to Helm 回滚">
        Helm 回滚
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get_hooks/" title="Switch to Helm 获取钩子">
        Helm 获取钩子
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get/" title="Switch to Helm 获取扩展">
        Helm 获取扩展
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get_manifest/" title="Switch to Helm 获取清单">
        Helm 获取清单
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get_all/" title="Switch to Helm 获取所有">
        Helm 获取所有
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get_notes/" title="Switch to Helm 获取注释">
        Helm 获取注释
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_pull/" title="Switch to Helm 拉取">
        Helm 拉取
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_history/" title="Switch to Helm 历史">
        Helm 历史
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_list/" title="Switch to Helm 列表">
        Helm 列表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_template/" title="Switch to Helm 模板">
        Helm 模板
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo_remove/" title="Switch to Helm 删除仓库">
        Helm 删除仓库
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_upgrade/" title="Switch to Helm 升级">
        Helm 升级
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_search/" title="Switch to Helm 搜索">
        Helm 搜索
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_search_hub/" title="Switch to Helm 搜索hub">
        Helm 搜索hub
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_search_repo/" title="Switch to Helm 搜索仓库">
        Helm 搜索仓库
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_repo_add/" title="Switch to Helm 添加仓库">
        Helm 添加仓库
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_push/" title="Switch to Helm 推送">
        Helm 推送
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_uninstall/" title="Switch to Helm 卸载">
        Helm 卸载
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_lint/" title="Switch to Helm 验证">
        Helm 验证
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_verify/" title="Switch to Helm 验证">
        Helm 验证
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_dependency/" title="Switch to Helm 依赖">
        Helm 依赖
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_dependency_list/" title="Switch to Helm 依赖列表">
        Helm 依赖列表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show/" title="Switch to Helm 展示">
        Helm 展示
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show_chart/" title="Switch to Helm 展示chart">
        Helm 展示chart
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show_crds/" title="Switch to Helm 展示Crd">
        Helm 展示Crd
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show_readme/" title="Switch to Helm 展示readme">
        Helm 展示readme
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show_values/" title="Switch to Helm 展示value">
        Helm 展示value
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_show_all/" title="Switch to Helm 展示所有">
        Helm 展示所有
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_registry/" title="Switch to Helm 注册表">
        Helm 注册表
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_registry_logout/" title="Switch to Helm 注册表登出">
        Helm 注册表登出
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_registry_login/" title="Switch to Helm 注册表登录">
        Helm 注册表登录
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_status/" title="Switch to Helm 状态">
        Helm 状态
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_completion_bash/" title="Switch to Helm补全 - bash">
        Helm补全 - bash
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_completion_fish/" title="Switch to Helm补全 - fish">
        Helm补全 - fish
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_completion_powershell/" title="Switch to Helm补全 - Powershell">
        Helm补全 - Powershell
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_completion_zsh/" title="Switch to Helm补全 - zsh">
        Helm补全 - zsh
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_create/" title="Switch to Helm创建">
        Helm创建
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_get_values/" title="Switch to Helm获取Values">
        Helm获取Values
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_dependency_build/" title="Switch to Helm依赖构建">
        Helm依赖构建
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/helm/helm_dependency_update/" title="Switch to Helm依赖升级">
        Helm依赖升级
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/community/">
    <span class="ripple">
      社区
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/community/developers/" title="Switch to 开发者指南">
        开发者指南
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/community/release_checklist/" title="Switch to 版本 Checklist">
        版本 Checklist
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/community/related/" title="Switch to 相关项目及文档">
        相关项目及文档
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/community/history/" title="Switch to 项目历史">
        项目历史
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/zh/docs/community/localization/" title="Switch to 本地化Helm文档">
        本地化Helm文档
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/faq/">
    <span class="ripple">
      常见问答(FAQ)
    </span>
  </a>

  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/glossary/">
    <span class="ripple">
      术语表
    </span>
  </a>

  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/zh/docs/example/">
    <span class="ripple">
      集成开发
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/zh/docs/example/golang/" title="Switch to ">
        
      </a>
    </li>
    
  </ul>
  
</li>

            
          
        

      </ul>
    </nav>

    <aside class="sidebar-buttons is-hidden-mobile">
      <div class="button-wrap">
        <a href="https://github.com/helm/helm-www#contributing" class="button is-outline is-fullwidth">Contribute to Docs</a>
      </div>
    </aside>
  </div>
</div>
    </aside>
    
    <section class="column content-docs">
      <article class="content-wrapper">
        <h1 id="常见问答">常见问答</h1>
<blockquote>
<p>Helm 2和Helm 3的主要区别是什么?<br>
该页面为最常见的问题提供帮助。</p>
</blockquote>
<p><strong>我们喜欢您的帮助</strong> 使得该文档变得更好。添加、修改或移除信息,

<a href="https://github.com/helm/helm-www/issues" target="_blank">提问题</a>或者向我们提交pull request。</p>
<h2 id="从helm-2发生的变化">从Helm 2发生的变化</h2>
<p>这里会展示一个对Helm3主要引入的变化的详尽列表。</p>
<h3 id="移除了tiller">移除了Tiller</h3>
<p>在Helm 2的开发周期中，我们引入了Tiller。Tiller在团队协作中共享集群时扮演了重要角色。
它使得不同的操作员与相同的版本进行交互称为了可能。</p>
<p>Kubernetes 1.6默认使用了基于角色的访问控制（RBAC），在生产环境对Tiller的锁定使用变得难于管理。
由于大量可能的安全策略，我们的立场是提供一个自由的默认配置。这样可以允许新手用户可以乐于尝试Helm
和Kubernetes而不需要深挖安全控制。 不幸的是这种自由的配置会授予用户他们不该有的权限。DevOps和SRE
在安装多用户集群时不得不去学习额外的操作步骤。</p>
<p>在听取了社区成员在特定场景使用Helm之后，我们发现Tiller的版本管理系统不需要依赖于集群内部用户去维护
状态或者作为一个Helm版本信息的中心hub。取而代之的是，我们可以简单地从Kubernetes API server获取信息，
在Chart客户端处理并在Kubernetes中存储安装记录。</p>
<p>Tiller的首要目标可以在没有Tiller的情况下实现，因此针对于 Helm 3 我们做的首要决定之一就是完全移除Tiller。</p>
<p>随着Tiller的消失，Helm的安全模块从根本上被简化。Helm 3 现在支持所有Kubernetes流行的安全、
身份和授权特性。Helm的权限通过你的

<a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank">kubeconfig文件</a>进行评估。
集群管理员可以限制用户权限，只要他们觉得合适，
无论什么粒度都可以做到。版本发布记录和Helm的剩余保留功能仍然会被记录在集群中。</p>
<h3 id="改进升级策略-三路策略合并补丁">改进升级策略: 三路策略合并补丁</h3>
<p>Helm 2 使用了一种双路策略合并补丁。在升级过程中，会对比最近一次的chart manifest和提出的
chart manifest(通过<code>helm upgrade</code>提供)。升级会对比两个chart的不同来决定哪些更改会应用到Kubernetes资源中。
如果更改是集群外带的（比如通过<code>kubectl edit</code>），则不会被考虑。结果就是资源不会回滚到之前的状态：
因为Helm只考虑最后一次应用的chart manifest作为它的当前状态，如果chart状态没有更改，则资源的活动状态不会更改。</p>
<p>现在Helm 3中，我们使用一种三路策略来合并补丁。Helm在生成一个补丁时会考虑之前老的manifest的活动状态。</p>
<h4 id="示例">示例</h4>
<p>让我们通过一些常见的例子来看看变化带来的影响。</p>
<h5 id="回滚已经改变的活动状态">回滚已经改变的活动状态</h5>
<p>你的团队正好在Kubernetes上使用Helm部署了生产环境应用。chart包含了一个部署对象使用了三套副本：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#009;font-weight:bold">$</span> helm install myapp ./myapp
</span></span></code></pre></div><p>一个开发新人加入了团队。当他们第一点观察生产环境集群时，发生了一个像是咖啡洒在了键盘上一样的严重事故，
他们使用 <code>kubectl scale</code> 对生产环境部署进行缩容，将副本数从3降到了0 。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#009;font-weight:bold">$</span> kubectl scale --replicas<span style="color:#555">=</span><span style="color:#f60">0</span> deployment/myapp
</span></span></code></pre></div><p>团队里面的另一个人看到线上环境已经挂了就决定回滚这个版本到之前的状态：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#009;font-weight:bold">$</span> helm rollback myapp
</span></span></code></pre></div><p>发生了什么？</p>
<p>在Helm 2中，会生成一个补丁并对比老的manifest和新的manifest。因为这是一个回滚，manifest是一样的。
Helm会认为新老manifest没有区别，因此没有需要更改的内容。副本统计数量继续保持为0。恐慌就接踵而至。</p>
<p>在Helm 3中，是用老的manifest生成新的补丁，活动状态和新的manifest。
Helm 意识到老的状态是3，而现有活动状态是0，并且新的manifest希望改回3，因此会生成一个补丁将状态改回3。</p>
<h5 id="活动状态已更改的情况下升级">活动状态已更改的情况下升级</h5>
<p>很多服务网格和其他基于controller的应用向Kubernetes对象中注入数据。比如sidecar、label和其他信息。
之前如果你从Chart渲染给定的manifest如下:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>server<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>nginx:2.0.0<span style="color:#bbb">
</span></span></span></code></pre></div><p>并且另一个应用修改活动状态如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>server<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>nginx:2.0.0<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>my-injected-sidecar<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>my-cool-mesh:1.0.0<span style="color:#bbb">
</span></span></span></code></pre></div><p>现在你想升级<code>nginx</code>镜像到<code>2.1.0</code>。因此用指定的manifest升级chart：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>server<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>nginx:2.1.0<span style="color:#bbb">
</span></span></span></code></pre></div><p>发生了什么？</p>
<p>在Helm 2中，Helm 在新老manifest之间生成了一个<code>containers</code>对象的补丁。
生成补丁的过程中不考虑集群的活动状态。</p>
<p>集群的活动状态被修改成了这样:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>server<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>nginx:2.1.0<span style="color:#bbb">
</span></span></span></code></pre></div><p>sidecar pod从活动状态中移除了。更多的恐慌袭来。</p>
<p>在Helm 3中，Helm 在新的manifest、活动状态和老manifest之间生成了一个<code>containers</code>对象的补丁。
会注意到新的manifest将镜像tag更新为<code>2.1.0</code>, 但是活动状态中包含了一个sidecar容器。</p>
<p>集群的活动状态被修改成了下面这样：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">containers</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>server<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>nginx:2.1.0<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>my-injected-sidecar<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">image</span>:<span style="color:#bbb"> </span>my-cool-mesh:1.0.0<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="发布名称现在限制在namespace范围内">发布名称现在限制在namespace范围内</h3>
<p>随着Tiller的移除， 每个版本的信息需要保存在某个地方。
在Helm 2中，是存储在Tiller相同的命名空间中。
实际上这意味着一个发布版本使用一个名称，其他发布不能使用相同的名称，
即使在不同的命名空间中也不行。</p>
<p>在Helm 3中，特定的版本信息作为发布本身存储在相同的命名空间中。
意味着用户现在可以在两个分开的命名空间中使用<code>helm install wordpress stable/wordpress</code>，
并且每个都能使用 <code>helm list</code> 改变当前命名空间。 (例如 <code>helm list --namespace foo</code>)。</p>
<p>与本地集群命名空间更好的一致性，使得 <code>helm list</code> 命令不再需要默认列出所有发布版本的列表。
取而代之的是，仅仅会在命名空间中列出当前kubernetes上下文的版本。
(也就是说运行<code>kubectl config view --minify</code>时会显示命名空间). 也就意味着您在执行<code>helm list</code>时必须提供
<code>--all-namespaces</code> 标识才能获得和Helm 2同样的结果。</p>
<h3 id="作为默认存储器的密钥">作为默认存储器的密钥</h3>
<p>在 Helm 3中, 密钥被作为
<a href="https://helm.sh/zh/docs/topics/advanced#%e5%90%8e%e7%ab%af%e5%ad%98%e5%82%a8" target="_blank">默认存储驱动</a>使用。
Helm 2默认使用ConfigMaps记录版本信息。在Helm 2.7.0中，新的存储后台使用密钥来存储版本信息，
现在是Helm 3的默认设置。</p>
<p>Helm 3默认允许更改密钥作为额外的安全措施在Kubernetes中和密钥加密一起保护chart。</p>
<p>
<a href="https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/" target="_blank">静态加密密钥</a>
在Kubernetes 1.7中作为alpha特性可以使用了，在Kubernetes 1.13中变成了稳定特性。
这允许用户静态加密Helm的发布元数据，同时也是一个类似Vault的以后可扩展的良好起点。</p>
<h3 id="更改了go的path导入">更改了Go的path导入</h3>
<p>在Helm 3中，Helm将Go的import路径从<code>k8s.io/helm</code>切换到了<code>helm.sh/helm/v3</code>。如果你打算
升级到Helm 3的Go客户端库，确保你已经更改了import路径。</p>
<h3 id="capabilities">Capabilities</h3>
<p><code>.Capabilities</code>内置对象会在已经简化的渲染阶段生效。</p>
<p>
<a href="https://helm.sh/zh/docs/chart_template_guide/builtin_objects/" target="_blank">内置对象</a></p>
<h3 id="使用json格式验证chart-values">使用Json格式验证Chart Values</h3>
<p>chart values现在可以使用JSON结构了。这保证用户提供value可以按照chart维护人员设置的结构排列，
并且当用户提供了错误的chart value时会有更好错误提示。</p>
<p>当调用以下命令时会进行JSON格式验证：</p>
<ul>
<li><code>helm install</code></li>
<li><code>helm upgrade</code></li>
<li><code>helm template</code></li>
<li><code>helm lint</code></li>
</ul>
<p>查看 
<a href="https://docs.helm.sh/zh/docs/topics/charts#%e6%9e%b6%e6%9e%84%e6%96%87%e4%bb%b6" target="_blank">格式文档</a> 了解更多信息。</p>
<h3 id="将-requirementsyaml-合并到了-chartyaml">将 <code>requirements.yaml</code> 合并到了 <code>Chart.yaml</code></h3>
<p>Chart依赖体系从 requirements.yaml 和 requirements.lock 移动到 Chart.yaml
和 Chart.lock。我们推荐在Helm 3的新chart中使用新格式。不过Helm 3 依然可以识别
Chart API 版本1 (<code>v1</code>) 并且会加载已有的 <code>requirements.yaml</code> 文件。</p>
<p>Helm 2中，<code>requirements.yaml</code> 看起来是这样的:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">dependencies</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>mariadb<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#f60">5.</span>x.x<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">repository</span>:<span style="color:#bbb"> </span>https://charts.helm.sh/stable<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">condition</span>:<span style="color:#bbb"> </span>mariadb.enabled<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">tags</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- database<span style="color:#bbb">
</span></span></span></code></pre></div><p>Helm 3中， 依赖使用了同样的表达方式，现在<code>Chart.yaml</code>是这样的：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">dependencies</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>mariadb<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#f60">5.</span>x.x<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">repository</span>:<span style="color:#bbb"> </span>https://charts.helm.sh/stable<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">condition</span>:<span style="color:#bbb"> </span>mariadb.enabled<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">tags</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- database<span style="color:#bbb">
</span></span></span></code></pre></div><p>Chart会依然下载和放置在 <code>charts/</code> 目录， 因此 <code>charts/</code> 目录中的子chart不作修改即可继续工作。</p>
<h3 id="name-或者---generate-name-安装时是必需的">Name (或者 --generate-name) 安装时是必需的</h3>
<p>Helm 2中，如果没有提供名称， 会自动生成一个名称。在生产环境，这被证明是一个麻烦事而不是一个有用的特性。
而在Helm 3中，如果 <code>helm install</code> 没有提供name，会抛异常。</p>
<p>如果仍然需要一个自动生成的名称，您可以使用 <code>--generate-name</code> 创建。</p>
<h3 id="推送chart到oci注册中心">推送Chart到OCI注册中心</h3>
<p>这是一个Helm 3 中的实验性特性。使用时需要设置环境变量 <code>HELM_EXPERIMENTAL_OCI=1</code>。</p>
<p>Chart仓库在较高层次上是一个存储和分发Chart的地址。Helm客户端打包并将Chart推送到Chart仓库中。
简单来说，Chart仓库就是一个基本的HTTP服务器用来存放index.yaml文件和打包的chart。</p>
<p>Chart 仓库API满足最基本的需求有一些好处，但是有些缺点开始显现出来：</p>
<ul>
<li>Chart 仓库很难在生产环境抽象出大部分的安全性实现。在生产环境有一个认证和授权的标准API就显得格外重要。</li>
<li>Helm Chart的初始化工具用来签名和验证chart的完整性和来源，在chart的发布过程中是可选的。</li>
<li>在多客户场景中，同一个chart可以被其他客户上传，同样的内容会被存储两次。chart仓库可以更加智能地处理
这个问题，但并不是正式规范的一部分。</li>
<li>在安全的多客户实现中使用单一的索引文件进行搜索、元数据信息存放和获取chart会变得困难和笨拙。</li>
</ul>
<p>Docker的分发项目（也称作Docker注册中心 v2）是Docker 注册项目的继承者。 很多主要的云供应商都提供项目
分发，很多供应商都提供相同的产品， 这个分发项目得益于多年的强化、安全性实践和对抗测试。</p>
<p>请查看 <code>helm help chart</code> 和 <code>helm help registry</code> 了解如何打包chart并推送到Docker注册中心的更多信息。</p>
<p>更多信息请查看 
<a href="https://docs.helm.sh/zh/docs/topics/registries/" target="_blank">注册中心</a>页面。</p>
<h3 id="移除了helm-serve">移除了<code>helm serve</code></h3>
<p><code>helm serve</code> 命令可以在你本地机器运行一个Chart仓库用于开发目的。
然而作为一个开发工具并没有受到太多利用，并且设计上有很多问题。最终我们决定移除它，
拆分成了一个插件。</p>
<p>对于 <code>helm serve</code> 的类似经历，可以查看本地文件系统存储选项在

<a href="https://chartmuseum.com/docs/#using-with-local-filesystem-storage" target="_blank">ChartMuseum</a>
和 
<a href="https://github.com/jdolitsky/helm-servecm" target="_blank">servecm plugin</a>.</p>
<h3 id="library-chart支持">Library chart支持</h3>
<p>Helm 3 支持的一类chart称为 “library chart”。 这是一个被其他chart共享的chart，
但是它自己不能创建发布组件。library chart的模板只能声明 <code>define</code> 元素。 全局范围
内的非<code>define</code>内容会被简单忽略。这允许用户复用和共享可在多个chart中重复使用的代码片段。
避免冗余和保留chart 
<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank">DRY</a>。</p>
<p>Library chart在 Chart.yaml的依赖指令中声明，安装和管理与其他chart一致。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">dependencies</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>mylib<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#f60">1.</span>x.x<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">repository</span>:<span style="color:#bbb"> </span>quay.io<span style="color:#bbb">
</span></span></span></code></pre></div><p>我们很高兴对开发者开放了这个特性的使用案例，以及library charts使用的最佳实践。</p>
<h3 id="chartyaml-api版本切换">Chart.yaml api版本切换</h3>
<p>随着对library chart的支持以及requirements.yaml合并到Chart.yaml，客户端可以识别Helm 2的包格式而不理解
这些新特性。因此我们将Chart.yaml的apiVersion从 <code>v1</code> 切换到了 <code>v2</code>。</p>
<p><code>helm create</code> 现在使用使用新格式创建chart，默认的apiVersion也切换到了这里。</p>
<p>客户端希望同时支持两个版本，进而能够检查Chart.yaml的<code>apiVersion</code>字段去理解如何解析包格式。</p>
<h3 id="xdg-基本目录支持">XDG 基本目录支持</h3>
<p>
<a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html" target="_blank">XDG 基本目录规范</a>
是一个定义了配置、数据和缓存文件应该存储在文件系统什么位置的可移植标准。</p>
<p>Helm 2中，Helm 将所有的信息存储在 <code>~/.helm</code> (被亲切地称为<code>helm home</code>)，可以通过设置 <code>$HELM_HOME</code>
环境变量修改，或者使用全局参数 <code>--home</code>。</p>
<p>Helm 3中，Helm现在遵守XDG 基本目录规范使用以下环境变量：</p>
<ul>
<li><code>$XDG_CACHE_HOME</code></li>
<li><code>$XDG_CONFIG_HOME</code></li>
<li><code>$XDG_DATA_HOME</code></li>
</ul>
<p>Helm 插件仍然使用 <code>$HELM_HOME</code> 作为 <code>$XDG_DATA_HOME</code> 的别名，以便希望将<code>$HELM_HOME</code>作为过渡环境的变量来保证向后兼容性。</p>
<p>一些新的环境变量也通过插件环境变量来兼容以下更改：</p>
<ul>
<li><code>$HELM_PATH_CACHE</code> 针对缓存路径</li>
<li><code>$HELM_PATH_CONFIG</code> 针对配置路径</li>
<li><code>$HELM_PATH_DATA</code> 针对data路径</li>
</ul>
<p>如果Helm插件期望支持Helm 3，建议使用新的环境变量。</p>
<h3 id="cli-命令重新命名">CLI 命令重新命名</h3>
<p>为了更好地从包管理器中调整不当措辞，<code>helm delete</code>被重命名为<code>helm uninstall</code>。
<code>helm delete</code> 依然作为 <code>helm uninstall</code> 的别名保留， 因此其他格式也能使用。</p>
<p>Helm 2 中为了清除版本清单，必须提供<code>--purge</code>参数。这个功能现在是默认使用的。
为保留之前的操作行为，要使用 <code>helm uninstall --keep-history</code>。</p>
<p>另外，其他一些重命名的命令提供了以下约定：</p>
<ul>
<li><code>helm inspect</code> -&gt; <code>helm show</code></li>
<li><code>helm fetch</code> -&gt; <code>helm pull</code></li>
</ul>
<p>这些命令都保留了老的动词作为别名，因此您能够使用任意一种格式。</p>
<h3 id="自动创建namespace">自动创建namespace</h3>
<p>当用命名空间创建版本时，命名空间不存在，Helm 2会创建一个命名空间。
Helm 3中沿用了其他Kubernetes 工具的形式，如果命名空间不存在，就返回错误。
如果您明确指定 <code>--create-namespace</code> 参数，Helm 3 会创建一个命名空间。</p>
<h3 id="chartapiversion是怎么回事">.Chart.ApiVersion是怎么回事?</h3>
<p>Helm针对缩略语遵循驼峰命名的典型惯例。我们已经在代码的其他位置做了处理，比如
<code>.Capabilities.APIVersions.Has</code>。Helm v3中，我们将 <code>.Chart.ApiVersion</code>
更正成了<code>.Chart.APIVersion</code>。</p>
<h2 id="安装">安装</h2>
<h3 id="为什么没有针对fedora和其他linux发行版的helm原生包">为什么没有针对Fedora和其他Linux发行版的Helm原生包?</h3>
<p>Helm 项目不维护针对操作系统和环境的包。Helm 社区如果觉得需要提供原生包时，可以提供原生包。
这是Homebrew 开始列出的方案。如果您有兴趣维护一个包，我们会很高兴的。</p>
<h3 id="为什么会提供-curl-bash-脚本">为什么会提供 <code>curl ...|bash</code> 脚本?</h3>
<p>我们的仓库(<code>scripts/get-helm-3</code>)中有个脚本可以作为 <code>curl ..|bash</code> 脚本执行。
使用HTTPS传输，The transfers are all protected by HTTPS, 并且这个脚本对它获取到包做一些审核。
然而这个脚本有任何shell脚本的所有常见危险。</p>
<p>我们提供这个脚本因为它很好用，但是我们建议用户先仔细阅读这个脚本。不过我们真正想要的是更好的Helm打包版本。</p>
<h3 id="我如何将helm客户端文件放置在其他位置而不是默认位置">我如何将Helm客户端文件放置在其他位置而不是默认位置?</h3>
<p>Helm 使用XDG结构存储文件。这些环境变量可以用来覆盖默认位置:</p>
<ul>
<li><code>$XDG_CACHE_HOME</code>: 设置另一个存储缓存文件的位置。</li>
<li><code>$XDG_CONFIG_HOME</code>: 设置另一个存储Helm配置的位置。</li>
<li><code>$XDG_DATA_HOME</code>: 设置另一个存储Helm数据的位置。</li>
</ul>
<p>注意，如果有已经存在的仓库，您需要使用 <code>helm repo add...</code> 重新添加。</p>
<h2 id="卸载">卸载</h2>
<h3 id="我想删除我本地helm-全部文件在什么位置">我想删除我本地Helm. 全部文件在什么位置？</h3>
<p>连同 <code>helm</code> 二进制文件一起，Helm将文件存储在以下位置：</p>
<ul>
<li>$XDG_CACHE_HOME</li>
<li>$XDG_CONFIG_HOME</li>
<li>$XDG_DATA_HOME</li>
</ul>
<p>下面这个表格按照操作系统给出了对应的默认文件夹位置：</p>
<table>
<thead>
<tr>
<th>Operating System</th>
<th>Cache Path</th>
<th>Configuration Path</th>
<th>Data Path</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux</td>
<td><code>$HOME/.cache/helm</code></td>
<td><code>$HOME/.config/helm</code></td>
<td><code>$HOME/.local/share/helm</code></td>
</tr>
<tr>
<td>macOS</td>
<td><code>$HOME/Library/Caches/helm</code></td>
<td><code>$HOME/Library/Preferences/helm</code></td>
<td><code>$HOME/Library/helm</code></td>
</tr>
<tr>
<td>Windows</td>
<td><code>%TEMP%\helm</code></td>
<td><code>%APPDATA%\helm</code></td>
<td><code>%APPDATA%\helm</code></td>
</tr>
</tbody>
</table>
<h2 id="故障排除">故障排除</h2>
<h3 id="在-gke-google-container-engine-我遇到了-no-ssh-tunnels-currently-open">在 GKE (Google Container Engine) 我遇到了 &quot;No SSH tunnels currently open&quot;</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Error: Error forwarding ports: error upgrading connection: No SSH tunnels currently open. Were the targets able to accept an ssh-key for user &#34;gke-[redacted]&#34;?
</span></span></code></pre></div><p>另一个错误消息的形式：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Unable to connect to the server: x509: certificate signed by unknown authority
</span></span></code></pre></div><p>这个问题是说您本地的Kubernetes 配置文件需要有正确的证书。</p>
<p>当你在GKE上创建集群时，它会为您提供一个证书，包括SSL证书和证书颁发机构。
这些需要放在Kubernetes配置文件中（默认位置: <code>~/.kube/config</code>），保证 <code>kubectl</code> 和 <code>helm</code> 可以访问他们。</p>
<h3 id="从helm-2迁移后-helm-list-仅显示部分或者不显示我的发布版本">从Helm 2迁移后， <code>helm list</code> 仅显示部分（或者不显示）我的发布版本</h3>
<p>您很可能忽略了一个事实：Helm 3 现在使用集群的命名空间来确定版本范围。 这意味着所有涉及版本的命令您都必须：</p>
<ul>
<li>在活动的kubernetes上下文中需要依赖当前的命名空间 (如 <code>kubectl config view --minify</code> 命令所述)，</li>
<li>使用 <code>--namespace</code>/<code>-n</code> 参数指定正确命名空间，或者</li>
<li>对于 <code>helm list</code> 命令，指定 <code>--all-namespaces</code>/<code>-A</code> 参数</li>
</ul>
<p>这适用于 <code>helm ls</code>、 <code>helm uninstall</code> 以及其他所有涉及版本的 <code>helm</code> 命令。</p>
<h3 id="为什么在macos上etcmdns_debug文件可以访问">为什么在macOS上<code>/etc/.mdns_debug</code>文件可以访问？</h3>
<p>我们了解到macOS上的一个案例是Helm会试图访问<code>/etc/.mdns_debug</code>文件。
如果文件存在，Helm会在文件句柄执行的时候保持打开状态。</p>
<p>这是因为macOS的 MDNS 库。它尝试去加载这个文件读取debug设置（如果已经启用）。
这个文件句柄可能不会保持打开，且这个问题已经报告给了苹果。 然而这种行为是macOS导致的，并不是Helm。</p>
<p>如果你不想让Helm加载这个文件，你可以将Helm编译成一个静态库而不使用主机网络堆栈。
这样做会导致Helm的二进制文件大小膨胀，但是会阻止这个文件打开。</p>
<p>这个问题最初被标记为潜在的安全问题。但后来已经确定，这种行为不存在任何缺陷或漏洞。</p>
<h3 id="helm-仓库使用时添加仓库失败">helm 仓库使用时添加仓库失败</h3>
<p>在Helm 3.3.1及之前版本，<code>helm repo add &lt;reponame&gt; &lt;url&gt;</code>在你添加已经存在的仓库时不会输入内容。
如果仓库已经存在，<code>--no-update</code> 参数会报错。</p>
<p>在Helm3.3.2及之后版本，试图添加一个已存在的仓库时会报以下错误：</p>
<p><code>Error: repository name (reponame) already exists, please specify a different name</code></p>
<p>现在这个默认行为是相反的。<code>--no-update</code> 现在被忽略。当您想替换（覆盖）已有仓库时，您可以使用 <code>--force-update</code>。</p>
<p>这是由于一个安全修复做出的重大更改，详情见
<a href="https://github.com/helm/helm/releases/tag/v3.3.2" target="_blank">Helm 3.3.2 release notes</a>。</p>
<h3 id="开启-kubernetes-客户端日志">开启 Kubernetes 客户端日志</h3>
<p>调试Kubernetes客户端打印日志时，可以使用
<a href="https://pkg.go.dev/k8s.io/klog" target="_blank">klog</a> 参数。使用<code>-v</code>可以设置日志级别应用于大多数场景。</p>
<p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>helm list -v 6
</span></span></code></pre></div><h3 id="tiller停止安装且无法访问">Tiller停止安装且无法访问</h3>
<p>Helm 发布之前可以从 
<a href="https://storage.googleapis.com/kubernetes-helm/" target="_blank">https://storage.googleapis.com/kubernetes-helm/</a> 获取。如
<a href="https://helm.sh/blog/get-helm-sh/" target="_blank">&quot;Announcing
get.helm.sh&quot;</a>中所述，官方地址2019年6月已变更。

<a href="https://github.com/orgs/helm/packages/container/package/tiller" target="_blank">GitHub Container Registry</a>
可以获取所有旧的Tiller镜像。</p>
<p>如果你想从原来的存储位置下载Helm旧版本，你会发现找不到了：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#aaa">&lt;Error&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#aaa">    &lt;Code&gt;AccessDenied&lt;/Code&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#aaa">    &lt;Message&gt;Access denied.&lt;/Message&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#aaa">    &lt;Details&gt;Anonymous caller does not have storage.objects.get access to the Google Cloud Storage object.&lt;/Details&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#aaa">&lt;/Error&gt;
</span></span></span></code></pre></div><p>
<a href="https://gcr.io/kubernetes-helm/tiller" target="_blank">原有Tiller镜像地址</a> 会在2021年8月开始删除镜像。我们已经增加了可用地址在

<a href="https://github.com/orgs/helm/packages/container/package/tiller" target="_blank">GitHub Container Registry</a>。
比如下载v2.17.0，用</p>
<p><code>https://get.helm.sh/helm-v2.17.0-linux-amd64.tar.gz</code> 替换</p>
<p><code>https://storage.googleapis.com/kubernetes-helm/helm-v2.17.0-linux-amd64.tar.gz</code></p>
<p>使用Helm v2.17.0初始化：</p>
<p><code>helm init —upgrade</code></p>
<p>或者如果需要另一个版本，使用 --tiller-image 替换默认位置安装特定的Helm v2 版本：</p>
<p><code>helm init --tiller-image ghcr.io/helm/tiller:v2.16.9</code></p>
<p><strong>注意</strong> Helm维护人员建议迁移到当前支持的Helm版本。Helm v2.17.0 是Helm 2的最终版本；Helm
v2自2020年11月起便不再支持，具体细节请查看
<a href="https://helm.sh/blog/helm-2-becomes-unsupported/" target="_blank">Helm 2 和 Charts Project 已不再支持</a>。
自那以后，Helm已经被发现很多的CVE，这些漏洞已经在Helm v3修复，但不会再给Helm v2打补丁。现在查看

<a href="https://github.com/helm/helm/security/advisories?state=published" target="_blank">Helm当前已发布的建议列表</a>并计划

<a href="https://helm.sh/docs/topics/v2_v3_migration/#helm" target="_blank">迁移到 Helm v3</a>吧。</p>


        <section class="quick-links clearfix">
          <h3 class="text-center">Quicklinks</h3>
          
          

          
          
        </section>
      </article>
    </section>
  </div>
</div>



<section class="container footer-links">
  <div class="columns clearfix">
    <dl class="column">
      <dt><a href="https://github.com/helm/helm">Helm Project</a></dt>
      <dd><a href="/blog">Blog</a></dd>
      <dd><a href="https://www.cncf.io/community/kubecon-cloudnativecon-events/">Events</a></dd>
      <dd><a href="/docs/intro/quickstart/">Quick Start Guide</a></dd>
      <dd><a href="https://github.com/cncf/foundation/blob/master/code-of-conduct.md">Code of Conduct</a></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://hub.helm.sh">Charts</a></dt>
      <dd><a href="/docs/topics/charts/">Introduction</a></dd>
      <dd><a href="/docs/howto/charts_tips_and_tricks/">Chart tips &amp; tricks</a></dd>
      <dd><a href="/docs/chart_template_guide/">Developing Charts</a></dd>
      <dd><a href="https://hub.helm.sh">Search 800+ Charts</a> <i class="fa fa-external"></i></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://github.com/helm/community/blob/main/communication.md">Development</a></dt>
      <dd><a href="https://kubernetes.slack.com/messages/C51E88VDG">#helm-dev</a> <em>(slack)</em></dd>
      <dd><a href="https://github.com/helm/helm/blob/main/CONTRIBUTING.md">Contribution Guide</a></dd>
      <dd><a href="https://github.com/helm/helm/blob/main/OWNERS">Maintainers</a></dd>
      <dd><a href="https://github.com/helm/community/blob/main/communication.md#meetings">Weekly Meetings</a></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://github.com/helm/community">Community</a></dt>
      <dd><a href="https://kubernetes.slack.com/messages/C0NH30761" title="#helm-users on Slack">#helm-users</a> <em>(slack)</em></dd>
      <dd><a href="https://lists.cncf.io/g/cncf-helm/topics">Mailing List</a></dd>
      <dd><a href="https://github.com/cncf/artwork/tree/master/projects/helm">Logos</a> &amp; <a href="https://github.com/helm/community/tree/main/art">Art</a></dd>
      <dd><a href="https://twitter.com/helmpack">Twitter</a></dd>
    </dl>
  </div>

  <div class="columns has-text-left cncf-wrap">
    <div class="column is-two-thirds">
      <a href="https://www.cncf.io/" title="Cloud Native Computing Foundation" target="_blank">
        <p class="lead">我们是 CNCF 的毕业项目。</p>
      </a>
    </div>

    <div class="column is-one-third has-text-right">
      <a href="https://www.cncf.io/" title="Cloud Native Computing Foundation" target="_blank">
        <img src="/img/cncf-white.svg" alt="We are a Cloud Native Computing Foundation project" class="">
      </a>
    </div>
  </div>

  <hr />

  <div class="copyright">
    <p>
      &copy; Helm Authors 2024 | Documentation distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>
    </p>

    <p>
      &copy; 2024 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
    </p>
  </div>
</section>



    
    

    











































<script src="/js/jquery.min.91911616059b1420d1a7e93cdb684177d9a8bcef473731743e5f72a796662698.js" integrity="sha256-kZEWFgWbFCDRp&#43;k822hBd9movO9HNzF0Pl9yp5ZmJpg="></script>




<script src="/js/bundle.min.019ebc0ad20ee895d8c4abd8ac9285f0dff63d29231c6ace4e5d022ea590e038.js" integrity="sha256-AZ68CtIO6JXYxKvYrJKF8N/2PSkjHGrOTl0CLqWQ4Dg="></script>



<script async src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '8bca76b0664b04581dc9f9854e844a90',
  indexName: 'helm',
  inputSelector: '#q',
  debug: false // Set debug to true if you want to inspect the dropdown
  })"></script>


    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42867143-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
