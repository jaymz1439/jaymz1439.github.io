



<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>
      
Helm | チャート開発のヒントとコツ

    </title>

    







<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0">


<meta name="description" content="Helm チャート開発者がプロダクション品質のチャートを構築する際に学んだヒントやコツを紹介しています。">


<meta property="og:title" content="チャート開発のヒントとコツ">
<meta property="og:title" content="チャート開発のヒントとコツ">
<meta property="og:url" content="https://zou-zongming.github.houston.softwaregrp.net/ja/docs/howto/charts_tips_and_tricks/">
<meta property="og:description" content="Helm チャート開発者がプロダクション品質のチャートを構築する際に学んだヒントやコツを紹介しています。" />

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zou-zongming.github.houston.softwaregrp.net/img/og-image.png">
<meta name="twitter:title" content="Helm | チャート開発のヒントとコツ">
<meta name="twitter:description" content="Helm チャート開発者がプロダクション品質のチャートを構築する際に学んだヒントやコツを紹介しています。">

<meta name="google-site-verification" content="dCa3wS47cErhx0IpaxbB85NfcOP-vFxevknVk6fzf5I">

<link rel="icon" href="https://zou-zongming.github.houston.softwaregrp.net/img/favicon-152.png" type="image/x-icon">
<link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-precomposed.png">














<link rel="stylesheet" href="/css/style.bb9a3f16cd8b057bc29c79565ae0d4a0d40d2088a9939d614209a479d640b7bb.css" integrity="sha256-u5o/Fs2LBXvCnHlWWuDUoNQNIIipk51hQgmkedZAt7s=">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />





  </head>

  
    <body id="landing" class="ja"></body>
  
    

<div id="helm" class="page-docs page-wrapper page-docs-list">
  <header>
    
    



<nav class="navbar navbar-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid is-vcentered">
    <div class="navbar-brand">
      <a href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 304 351"><title>Helm</title>
<mask id="a" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<mask id="b" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<g fill="none" fill-rule="evenodd" transform="translate(-11 -51)">
<path d="m11.6785714 189h19.7858357v26.789h23.9037v-26.789h19.7858358v75.25h-19.7858358v-28.695333h-23.9037v28.695333h-19.7858357zm86.1738429 75.25v-75.25h46.8030427v16.354333h-27.017207v12.240667h23.9037v16.655333h-23.9037v13.846h27.017207v16.153667zm68.4971567 0v-75.25h19.785836v55.384h27.117643v19.866zm77.536372-75.25 30.733328 27.892667 30.632893-27.892667h8.938779v75.25h-19.886272v-38.628333l-19.6854 17.959666-19.785835-17.859333v38.528h-19.886272v-75.25z" fill="#0f1689"/>
<g transform="matrix(1 0 0 -1 11.958136 455)">
<g fill="#0f1689" mask="url(#a)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -51.706556)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 47.704768)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 53.670762)"/>
</g>
<path d="m251.467006 173.099849c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.245901-97.0586959 53.334588m2.1981107 129.169534c20.8403036 30.232701 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865887 94.974049-50.191495" mask="url(#a)" stroke="#0f1689" stroke-width="20"/>
</g>
<g transform="translate(11.958136)">
<g fill="#0f1689" mask="url(#b)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -54.166016)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 45.245308)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 51.211302)"/>
</g>
<path d="m251.467006 170.64039c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.2459-97.0586959 53.334587m2.1981107 129.169534c20.8403036 30.232702 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865886 94.974049-50.191494" mask="url(#b)" stroke="#0f1689" stroke-width="20"/>
</g>
</g>
</svg>
      </a>
    </div>

    
    <div class="navbar-menu is-centered" id="navMenuDocumentation">
      
        
          <a href="/ja/" class="navbar-item">
            ホーム
          </a>
        
      
        
          <a href="/ja/docs" class="navbar-item">
            ドキュメント
          </a>
        
      
        
          <a href="https://hub.helm.sh/" class="navbar-item external" target="_blank">
            チャート <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://helm.sh/blog" class="navbar-item external" target="_blank">
            ブログ <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://github.com/helm/community" class="navbar-item external" target="_blank">
            コミュニティ <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
    </div>

    <div class="navbar-end is-hidden-mobile">
      <ul class="is-pulled-right">
        





  <li class="versioner l18ner navbar-item has-dropdown is-right is-hoverable">
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      日本語 <i class="fa fa-caret-down"></i>
    </a>

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      
      
          
          
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/docs/howto/charts_tips_and_tricks/"><code>en</code> &nbsp; English</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/de/docs/howto/charts_tips_and_tricks/"><code>de</code> &nbsp; Deutsch</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/es/docs/howto/charts_tips_and_tricks/"><code>es</code> &nbsp; Español</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/ja/docs/howto/charts_tips_and_tricks/" class="active"><code>ja</code> &nbsp; 日本語</a></li>
                
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/ko/docs/howto/charts_tips_and_tricks/"><code>ko</code> &nbsp; 한국어</a></li>
                
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/zh/docs/howto/charts_tips_and_tricks/"><code>zh</code> &nbsp; 中文</a></li>
                
              

            
      
      <li class="navbar-item l18n-prompt"><a href="https://github.com/helm/helm-www#internationalization--translation"><small>このページを翻訳</small></a></li>
    </ul>
  </li>
  

        




  <li class="versioner navbar-item has-dropdown is-right is-hoverable">
    
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      v3.13.0 <i class="fa fa-caret-down"></i>
    </a>
    

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      <li>
        <a href="https://helm.sh/docs" class="navbar-item">
          v3.13.0 <em>stable</em>
        </a>
      </li>
      
      <li>
        <a href="https://v2.helm.sh/docs" class="navbar-item">
          v2.17.0
        </a>
      </li>
      
    </ul>
  </li>

        <li class="">
          <a class="button not-fixed is-outlined" href="/ja/docs/intro/quickstart">始めましょう</a>
        </li>
      </ul>
    </div>

    
    <div class="navbar-end is-hidden-tablet">
      <div id="navbarBurger" class="navbar-burger burger" data-target="navMenuDocumentation">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
</nav>

    



<nav class="navbar navbar-top navbar-top-fixed" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    
    <div class="navbar-brand">
      <a href="/">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 304 351"><title>Helm</title>
<mask id="a" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<mask id="b" fill="#fff">
<path d="m0 0h313.303155v159.864865h-313.303155z" fill="#fff" fill-rule="evenodd"/>
</mask>
<g fill="none" fill-rule="evenodd" transform="translate(-11 -51)">
<path d="m11.6785714 189h19.7858357v26.789h23.9037v-26.789h19.7858358v75.25h-19.7858358v-28.695333h-23.9037v28.695333h-19.7858357zm86.1738429 75.25v-75.25h46.8030427v16.354333h-27.017207v12.240667h23.9037v16.655333h-23.9037v13.846h27.017207v16.153667zm68.4971567 0v-75.25h19.785836v55.384h27.117643v19.866zm77.536372-75.25 30.733328 27.892667 30.632893-27.892667h8.938779v75.25h-19.886272v-38.628333l-19.6854 17.959666-19.785835-17.859333v38.528h-19.886272v-75.25z" fill="#0f1689"/>
<g transform="matrix(1 0 0 -1 11.958136 455)">
<g fill="#0f1689" mask="url(#a)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -51.706556)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 47.704768)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 53.670762)"/>
</g>
<path d="m251.467006 173.099849c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.245901-97.0586959 53.334588m2.1981107 129.169534c20.8403036 30.232701 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865887 94.974049-50.191495" mask="url(#a)" stroke="#0f1689" stroke-width="20"/>
</g>
<g transform="translate(11.958136)">
<g fill="#0f1689" mask="url(#b)">
<path d="m203.460676 95.6875425c6.93631 0 12.559301-14.8092194 12.559301-33.0773172s-5.622991-33.0773172-12.559301-33.0773172c-6.936311 0-12.559301 14.8092194-12.559301 33.0773172s5.62299 33.0773172 12.559301 33.0773172z" transform="matrix(.81915204 .57357644 -.57357644 .81915204 111.870091 -54.166016)"/>
<path d="m30.1423223 95.6875425c6.9363104 0 12.559301-14.8092194 12.559301-33.0773172s-5.6229906-33.0773172-12.559301-33.0773172-12.5593009 14.8092194-12.5593009 33.0773172 5.6229905 33.0773172 12.5593009 33.0773172z" transform="matrix(-.81915204 .57357644 .57357644 .81915204 58.084611 45.245308)"/>
<path d="m116.732815 66.2752676c6.936311 0 12.559301-14.8092193 12.559301-33.0773172 0-18.2680978-5.62299-33.07731713-12.559301-33.07731713-6.93631 0-12.559301 14.80921933-12.559301 33.07731713 0 18.2680979 5.622991 33.0773172 12.559301 33.0773172z" transform="matrix(-1 0 0 1 272.628524 51.211302)"/>
</g>
<path d="m251.467006 170.64039c-20.230076-33.609969-56.889565-56.067908-98.755776-56.067908-40.720798 0-76.5158766 21.2459-97.0586959 53.334587m2.1981107 129.169534c20.8403036 30.232702 55.5559042 50.026591 94.8605852 50.026591 39.376099 0 74.146424-19.865886 94.974049-50.191494" mask="url(#b)" stroke="#0f1689" stroke-width="20"/>
</g>
</g>
</svg>
      </a>
    </div>

    
    <div class="navbar-menu is-centered" id="navMenuDocumentation">
      
        
          <a href="/ja/" class="navbar-item">
            ホーム
          </a>
        
      
        
          <a href="/ja/docs" class="navbar-item">
            ドキュメント
          </a>
        
      
        
          <a href="https://hub.helm.sh/" class
          ="navbar-item external" target="_blank">
            チャート <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://helm.sh/blog" class
          ="navbar-item external" target="_blank">
            ブログ <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
        
          <a href="https://github.com/helm/community" class
          ="navbar-item external" target="_blank">
            コミュニティ <span class="icon"><i class="mdi mdi-open-in-new"></i></span>
          </a>
        
      
    </div>

    <div class="navbar-end is-hidden-mobile">
      <ul class="is-pulled-right">
        





  <li class="versioner l18ner navbar-item has-dropdown is-right is-hoverable">
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      日本語 <i class="fa fa-caret-down"></i>
    </a>

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      
      
          
          
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/docs/howto/charts_tips_and_tricks/"><code>en</code> &nbsp; English</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/de/docs/howto/charts_tips_and_tricks/"><code>de</code> &nbsp; Deutsch</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/es/docs/howto/charts_tips_and_tricks/"><code>es</code> &nbsp; Español</a></li>
                
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/ja/docs/howto/charts_tips_and_tricks/" class="active"><code>ja</code> &nbsp; 日本語</a></li>
                
              

            
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/ko/docs/howto/charts_tips_and_tricks/"><code>ko</code> &nbsp; 한국어</a></li>
                
              

            
              

            
              

            
              

            
      
          
          
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              

            
              
                
                
                    <li class="navbar-item"><a href="https://zou-zongming.github.houston.softwaregrp.net/zh/docs/howto/charts_tips_and_tricks/"><code>zh</code> &nbsp; 中文</a></li>
                
              

            
      
      <li class="navbar-item l18n-prompt"><a href="https://github.com/helm/helm-www#internationalization--translation"><small>このページを翻訳</small></a></li>
    </ul>
  </li>
  

        




  <li class="versioner navbar-item has-dropdown is-right is-hoverable">
    
    <a data-dropdown="drop1" aria-controls="drop1" aria-expanded="false" class="versioner-trigger navbar-link">
      v3.13.0 <i class="fa fa-caret-down"></i>
    </a>
    

    <ul id="drop1" class="navbar-dropdown dropdown-menu f-dropdown" data-dropdown-content aria-hidden="true" tabindex="-1">
      
      <li>
        <a href="https://helm.sh/docs" class="navbar-item">
          v3.13.0 <em>stable</em>
        </a>
      </li>
      
      <li>
        <a href="https://v2.helm.sh/docs" class="navbar-item">
          v2.17.0
        </a>
      </li>
      
    </ul>
  </li>

        <li>
          <a class="button not-fixed is-outlined" href="/ja/docs/intro/quickstart">始めましょう</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

  </header>

  <div class="columns" id="helm">
    <aside class="column is-narrow is-gapless sidebar-wrapper">
      

<input type="checkbox" class="hamburger-trigger" />
<small class="hamburger">
  <span></span>
  <span></span>
  <span></span>
</small>

<div class="sidebar">
  <div class="is-visible-mobile is-hidden-tablet" id="sidebar-toggle">Browse Docs <span class="icon"><i class="mdi mdi-arrow-down"></i></span></div>

  <div class="sidebar-content-wrapper">
    <div class="search-container">
      <input id="q" placeholder="Search..." autofocus>
      <span class="icon"><i class="mdi mdi-magnify"></i></span>
    </div>

    
    <nav class="sidebar-nav">

      <ul class="current sidebar-main">
        <li class="sidebar-nav-item toctree-l1">
          <a class="reference internal" href="/ja/docs/" state="">
            <span class="ripple">
              ドキュメントホーム
            </span>
          </a>
        </li>

        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/intro/">
    <span class="ripple">
      概要
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/intro/quickstart/" title="Switch to クイックスタートガイド">
        クイックスタートガイド
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/intro/install/" title="Switch to Helm のインストール">
        Helm のインストール
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/intro/using_helm/" title="Switch to Helm の使い方">
        Helm の使い方
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/howto/">
    <span class="ripple">
      How-to
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/howto/charts_tips_and_tricks/" title="Switch to チャート開発のヒントとコツ">
        チャート開発のヒントとコツ
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/topics/">
    <span class="ripple">
      トピック
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/topics/chart_tests/" title="Switch to チャートのテスト">
        チャートのテスト
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/topics/architecture/" title="Switch to Helm アーキテクチャ">
        Helm アーキテクチャ
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/topics/advanced/" title="Switch to 高度な Helm のテクニック">
        高度な Helm のテクニック
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/chart_best_practices/">
    <span class="ripple">
      ベストプラクティス
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/conventions/" title="Switch to 一般的な慣習">
        一般的な慣習
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/values/" title="Switch to 値">
        値
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/templates/" title="Switch to テンプレート">
        テンプレート
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/dependencies/" title="Switch to 依存関係">
        依存関係
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/labels/" title="Switch to ラベルとアノテーション">
        ラベルとアノテーション
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_best_practices/pods/" title="Switch to PodとPodテンプレート">
        PodとPodテンプレート
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/chart_template_guide/">
    <span class="ripple">
      チャートテンプレートガイド
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/chart_template_guide/data_types/" title="Switch to Appendix: Go データ型とテンプレート">
        Appendix: Go データ型とテンプレート
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/helm/">
    <span class="ripple">
      Helm コマンド
    </span>
  </a>

  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/community/">
    <span class="ripple">
      コミュニティ
    </span>
  </a>

  
  <ul class="current">
    
    <li class="toctree-12">
      <a href="/ja/docs/community/developers/" title="Switch to 開発者ガイド">
        開発者ガイド
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/community/history/" title="Switch to プロジェクトの歴史">
        プロジェクトの歴史
      </a>
    </li>
    
    <li class="toctree-12">
      <a href="/ja/docs/community/localization/" title="Switch to Helm ドキュメントの国際化">
        Helm ドキュメントの国際化
      </a>
    </li>
    
  </ul>
  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/faq/">
    <span class="ripple">
      よくある質問
    </span>
  </a>

  
</li>

            
          
            
              <li class="sidebar-nav-item toctree-l1">
  <a class="reference internal" href="/ja/docs/glossary/">
    <span class="ripple">
      用語集
    </span>
  </a>

  
</li>

            
          
        

      </ul>
    </nav>

    <aside class="sidebar-buttons is-hidden-mobile">
      <div class="button-wrap">
        <a href="https://github.com/helm/helm-www#contributing" class="button is-outline is-fullwidth">Contribute to Docs</a>
      </div>
    </aside>
  </div>
</div>
    </aside>
    
    <section class="column content-docs">
      <article class="content-wrapper">
        <h1>チャート開発のヒントとコツ</h1>
        
        <p>このガイドでは、
Helm チャート開発者がプロダクション品質のチャートを構築する際に学んだヒントやコツを紹介しています。</p>
<h2 id="テンプレートの関数を知る">テンプレートの関数を知る</h2>
<p>Helm はリソースファイルのテンプレートに 
<a href="https://godoc.org/text/template" target="_blank">Go テンプレート</a>を使用します。
Go にはいくつかの組み込み機能がありますが、
他にも多くの機能が追加されています。</p>
<p>まず、

<a href="https://masterminds.github.io/sprig/" target="_blank">Sprig ライブラリ</a>の関数をすべて追加しました。</p>
<p>また、<code>include</code> と <code>required</code> の2つの特別なテンプレート関数を追加しました。
<code>include</code> 関数では、別のテンプレートを持ち込んで、
その結果を他のテンプレート関数に渡すことができます。</p>
<p>例えば、このテンプレートスニペットは <code>mytpl</code> というテンプレートを含み、
その結果を小文字にして二重引用符で囲んでいます。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">value</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>include &#34;mytpl&#34; . | lower | quote }}<span style="color:#bbb">
</span></span></span></code></pre></div><p><code>required</code> 関数では、テンプレートレンダリングに必要な特定の値のエントリを宣言することができます。
値が空の場合、テンプレートのレンダリングは
ユーザーが送信したエラーメッセージで失敗します。</p>
<p>以下の <code>required</code> 関数の例は、.Values.who のエントリが必須であることを宣言し、
そのエントリが見つからない場合に
エラーメッセージを表示します。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">value</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>required &#34;A valid .Values.who entry required!&#34; .Values.who }}<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="文字列を引用する整数を引用しない">文字列を引用する、整数を引用しない</h2>
<p>文字列データを扱う際には、文字列をそのままにしておくよりも、
引用符で囲んだ方が安全です。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>.Values.MyName | quote }}<span style="color:#bbb">
</span></span></span></code></pre></div><p>しかし、整数で作業するときは <em>値を引用しないでください</em>。
これは多くの場合、Kubernetes 内部で parse エラーを引き起こす可能性があります。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">port</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>.Values.Port }}<span style="color:#bbb">
</span></span></span></code></pre></div><p>この注意事項は、たとえそれが整数を表す場合でも、
文字列であることが予想される env 変数の値には適用されません。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">env</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>HOST<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">value</span>:<span style="color:#bbb"> </span><span style="color:#c30">&#34;http://host&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>- <span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>PORT<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">value</span>:<span style="color:#bbb"> </span><span style="color:#c30">&#34;1234&#34;</span><span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="include-関数の使用">'include' 関数の使用</h2>
<p>Go は、組み込みの <code>template</code> ディレクティブを使って、
あるテンプレートを別のテンプレートに含める方法を提供しています。
しかし、組み込み関数はGoテンプレートパイプラインでは使用できません。</p>
<p>テンプレートをインクルードして、そのテンプレートの出力に対して操作を行うことができるようにするために、
Helm には特別な <code>include</code> 関数があります。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{{ include &#34;toYaml&#34; $value | indent 2 }}
</span></span></code></pre></div><p>上記には <code>toYaml</code> というテンプレートが含まれており、それに <code>$value</code> を渡し、
そのテンプレートの出力を <code>indent</code> 関数に渡しています。</p>
<p>YAML はインデントレベルと空白に意味を与えるので、
これはコードのスニペットをインクルードし、
関連するコンテキストでインデントを処理するための素晴らしい方法です。</p>
<h2 id="required-関数を使う">'required' 関数を使う</h2>
<p>Go では、マップに存在しないキーでマップがインデックス付けされている場合の動作を制御するために、
テンプレートオプションを設定する方法を提供しています。
通常、これは <code>template.Options(&quot;missingkey=option&quot;)</code> で設定され、
<code>option</code> には <code>default</code>、<code>zero</code>、または <code>error</code> を指定できます。
このオプションをエラーに設定すると、エラーで実行が停止しますが、
これはマップ内に存在しないすべてのキーに適用されます。
チャート開発者が <code>values.yaml</code> ファイル内の選択値にこの動作を適用したい場合があるかもしれません。</p>
<p><code>required</code> 関数は、
テンプレートのレンダリングに必要な値エントリを宣言する機能を開発者に提供します。
<code>values.yaml</code> のエントリが空の場合、
テンプレートはレンダリングされず、開発者によって提供されたエラーメッセージを返します。</p>
<p>例えば</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{{ required &#34;A valid foo is required!&#34; .Values.foo }}
</span></span></code></pre></div><p>上記は <code>.Values.foo</code> が定義されている場合はテンプレートをレンダリングしますが、
<code>.Values.foo</code> が未定義の場合はレンダリングに失敗して終了します。</p>
<h2 id="tpl-関数の使用">'tpl' 関数の使用</h2>
<p><code>tpl</code> 関数は、開発者がテンプレート内のテンプレートとして文字列を評価することを可能にします。
これは、テンプレートの文字列を値としてチャートに渡したり、外部の設定ファイルをレンダリングしたりするのに便利です。
構文は次の通りです: <code>{{ tpl TEMPLATE_STRING VALUES }}</code></p>
<p>例:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># values</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">template</span>:<span style="color:#bbb"> </span><span style="color:#c30">&#34;{{ .Values.name }}&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span><span style="color:#c30">&#34;Tom&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># template</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>{{<span style="color:#bbb"> </span>tpl .Values.template . }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># output</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>Tom<span style="color:#bbb">
</span></span></span></code></pre></div><p>外部設定ファイルをレンダリングします。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#09f;font-style:italic"># 外部設定ファイル conf/app.conf</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>firstName={{ .Values.firstName }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>lastName={{ .Values.lastName }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># values</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">firstName</span>:<span style="color:#bbb"> </span>Peter<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">lastName</span>:<span style="color:#bbb"> </span>Parker<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># template</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>{{<span style="color:#bbb"> </span>tpl (.Files.Get &#34;conf/app.conf&#34;) . }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#09f;font-style:italic"># output</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>firstName=Peter<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>lastName=Parker<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="イメージプルの-secret-の作成">イメージプルの Secret の作成</h2>
<p>イメージプルの Secret は、基本的には <em>registry</em>、<em>username</em>、<em>password</em> の組み合わせです。
デプロイするアプリケーションで必要になるかもしれませんが、
それらを作成するには <code>base64</code> を数回実行する必要があります。
シークレットのペイロードとして使用するために、Docker の設定ファイルを構成するヘルパーテンプレートを書くことができます。
以下に例を示します。</p>
<p>まず、<code>values.yaml</code> ファイルに
以下のようにクレデンシャルが定義されているとします。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">imageCredentials</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">registry</span>:<span style="color:#bbb"> </span>quay.io<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">username</span>:<span style="color:#bbb"> </span>someone<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">password</span>:<span style="color:#bbb"> </span>sillyness<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">email</span>:<span style="color:#bbb"> </span>someone@host.com<span style="color:#bbb">
</span></span></span></code></pre></div><p>次に、ヘルパーテンプレートを以下のように定義します。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>{{- define &#34;imagePullSecret&#34; }}
</span></span><span style="display:flex;"><span>{{- with .Values.imageCredentials }}
</span></span><span style="display:flex;"><span>{{- printf &#34;{\&#34;auths\&#34;:{\&#34;%s\&#34;:{\&#34;username\&#34;:\&#34;%s\&#34;,\&#34;password\&#34;:\&#34;%s\&#34;,\&#34;email\&#34;:\&#34;%s\&#34;,\&#34;auth\&#34;:\&#34;%s\&#34;}}}&#34; .registry .username .password .email (printf &#34;%s:%s&#34; .username .password | b64enc) | b64enc }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span><span style="display:flex;"><span>{{- end }}
</span></span></code></pre></div><p>最後に、より大きなテンプレートでヘルパーテンプレートを使用して、
Secret マニフェストを作成します。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Secret<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">name</span>:<span style="color:#bbb"> </span>myregistrykey<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">type</span>:<span style="color:#bbb"> </span>kubernetes.io/dockerconfigjson<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">data</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">.dockerconfigjson</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>template &#34;imagePullSecret&#34; . }}<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="デプロイメントの自動ロール">デプロイメントの自動ロール</h2>
<p>ConfigMaps や Secrets がコンテナ内の設定ファイルとして注入されていたり、
他の外部依存関係の変更があってローリングポッドを必要としたりすることがよくあります。
アプリケーションによっては、後続の <code>helm upgrade</code> でこれらが更新された場合、
再起動が必要になるかもしれませんが、デプロイの仕様自体が変更されていない場合、
アプリケーションは古い設定で実行され続け、
結果として一貫性のないデプロイになってしまいます。</p>
<p><code>sha256sum</code> 関数を使用すると、
別のファイルが変更された場合にデプロイメントの annotations セクションを確実に更新することができます。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">template</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#309;font-weight:bold">annotations</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#309;font-weight:bold">checksum/config</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>include (print $.Template.BasePath &#34;/configmap.yaml&#34;) . | sha256sum }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>[...]<span style="color:#bbb">
</span></span></span></code></pre></div><p>デプロイメントを常にロールさせたい場合は、上記と同様の annotation ステップを使用できますが、
代わりにランダムな文字列に置き換えて、
常に変化してデプロイメントがロールするようにします。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Deployment<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">spec</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">template</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#309;font-weight:bold">annotations</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#309;font-weight:bold">rollme</span>:<span style="color:#bbb"> </span>{{<span style="color:#bbb"> </span>randAlphaNum 5 | quote }}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>[...]<span style="color:#bbb">
</span></span></span></code></pre></div><p>これらの方法はどちらも、ダウンタイムを回避するために、
デプロイメントに組み込まれた更新戦略ロジックを活用することができます。</p>
<p>NOTE: 過去には別のオプションとして <code>--recreate-pods</code> フラグの使用を推奨していました。
このフラグは Helm 3 で非推奨とされ、
上記のより宣言的な方法が採用されました。</p>
<h2 id="リソースをアンインストールしないように-helm-に伝える">リソースをアンインストールしないように Helm に伝える</h2>
<p>Helm が <code>helm uninstall</code> を実行したときに、アンインストールしてはいけないリソースが存在することがあります。
チャート開発者は、リソースがアンインストールされないように、
リソースに annotation を追加することができます。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#309;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Secret<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#309;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#309;font-weight:bold">annotations</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#309;font-weight:bold">&#34;helm.sh/resource-policy&#34;: </span>keep<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>[...]<span style="color:#bbb">
</span></span></span></code></pre></div><p>(引用符が必要です。)</p>
<p><code>&quot;helm.sh/resource-policy&quot;: keep</code> アノテーションは、
Helm の操作 (<code>helm uninstall</code>, <code>helm upgrade</code>, <code>helm rollback</code> など) によってこのリソースが削除されてしまう場合に、
削除をスキップするように指示します。
<em>しかし</em>、このリソースは孤立します。
Helm はもはやどのような方法でもこのリソースを管理することはできません。
これは、既にアンインストールされていてリソースを保持しているリリースで <code>helm install --replace</code> を使用した場合に問題が発生する可能性があります。</p>
<h2 id="partials-とテンプレートのインクルードの使用">&quot;Partials&quot; とテンプレートのインクルードの使用</h2>
<p>ブロックでもテンプレートの Partials でも、
チャートの中に再利用可能なパーツを作成したいと思うことがあります。
そして、多くの場合、これらを独自のファイルに保存しておいた方がすっきりします。</p>
<p><code>templates/</code> ディレクトリにおいて、アンダースコア (<code>_</code>) で始まるファイルは、
Kubernetes のマニフェストファイルを出力することは期待されていません。
そのため、慣習的にヘルパーテンプレートと Partials は <code>_helpers.tpl</code> ファイルに配置されます。</p>
<h2 id="多くの依存関係を持つ複雑なチャート">多くの依存関係を持つ複雑なチャート</h2>
<p>
<a href="https://github.com/helm/charts" target="_blank">公式のチャートリポジトリ</a> にあるチャートの多くは、
より高度なアプリケーションを作成するための「ビルディングブロック」です。
しかし、チャートは大規模なアプリケーションのインスタンスを作成するために使用されることもあります。
そのような場合、1つのアンブレラチャートが複数のサブチャートを持ち、
それぞれが全体の一部として機能することがあります。</p>
<p>離散的なパーツから複雑なアプリケーションを構成するための現在のベストプラクティスは、
グローバルな構成を公開するトップレベルのアンブレラチャートを作成し、
<code>charts/</code> サブディレクトリを使用して
各コンポーネントを埋め込むことです。</p>
<h2 id="yaml-は-json-のスーパーセット">YAML は JSON のスーパーセット</h2>
<p>YAML の仕様によると、YAML は JSON のスーパーセットです。
つまり、どんな有効な JSON 構造も YAML で有効でなければなりません。</p>
<p>これには長所があります。
時にテンプレート開発者は、YAML の空白感度に対処するよりも、
JSON ライクな構文でデータ構造を表現する方が簡単だと思うかもしれません。</p>
<p>ベストプラクティスとして、JSON 構文が書式問題のリスクを大幅に軽減 <em>しない限り</em>、
テンプレートは YAML ライクな構文に従うべきです。</p>
<h2 id="ランダムな値の生成には注意が必要">ランダムな値の生成には注意が必要</h2>
<p>Helm にはランダムなデータや暗号鍵などを生成する機能があります。
これらは使っても問題ありません。
しかし、アップグレード中にテンプレートが再実行されることに注意してください。
テンプレートの実行で前回の実行とは異なるデータが生成されると、そのリソースの更新がトリガーされます。</p>
<h2 id="1つのコマンドでリリースをインストールまたはアップグレード">1つのコマンドでリリースをインストールまたはアップグレード</h2>
<p>Helm は、インストールやアップグレードを単一のコマンドで実行する方法を提供します。
<code>helm upgrade</code> コマンドで <code>--install</code> を付けて使ってください。
これにより、Helm はリリースが既にインストールされているかどうかを確認します。
インストールされていない場合は、インストールを実行します。されている場合は、既存のリリースがアップグレードされます。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#009;font-weight:bold">$</span> helm upgrade --install &lt;release name&gt; --values &lt;values file&gt; &lt;chart directory&gt;
</span></span></code></pre></div>

        <nav class="level prev-next">
          <div class="level-left level-item">
            
          </div>
          
          <div class="level-right level-item has-text-right">
            
          </div>
        </nav>
      </article>
    </section>
  </div>
</div>



<section class="container footer-links">
  <div class="columns clearfix">
    <dl class="column">
      <dt><a href="https://github.com/helm/helm">Helm Project</a></dt>
      <dd><a href="/blog">Blog</a></dd>
      <dd><a href="https://www.cncf.io/community/kubecon-cloudnativecon-events/">Events</a></dd>
      <dd><a href="/docs/intro/quickstart/">Quick Start Guide</a></dd>
      <dd><a href="https://github.com/cncf/foundation/blob/master/code-of-conduct.md">Code of Conduct</a></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://hub.helm.sh">Charts</a></dt>
      <dd><a href="/docs/topics/charts/">Introduction</a></dd>
      <dd><a href="/docs/howto/charts_tips_and_tricks/">Chart tips &amp; tricks</a></dd>
      <dd><a href="/docs/chart_template_guide/">Developing Charts</a></dd>
      <dd><a href="https://hub.helm.sh">Search 800+ Charts</a> <i class="fa fa-external"></i></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://github.com/helm/community/blob/main/communication.md">Development</a></dt>
      <dd><a href="https://kubernetes.slack.com/messages/C51E88VDG">#helm-dev</a> <em>(slack)</em></dd>
      <dd><a href="https://github.com/helm/helm/blob/main/CONTRIBUTING.md">Contribution Guide</a></dd>
      <dd><a href="https://github.com/helm/helm/blob/main/OWNERS">Maintainers</a></dd>
      <dd><a href="https://github.com/helm/community/blob/main/communication.md#meetings">Weekly Meetings</a></dd>
    </dl>

    <dl class="column">
      <dt><a href="https://github.com/helm/community">Community</a></dt>
      <dd><a href="https://kubernetes.slack.com/messages/C0NH30761" title="#helm-users on Slack">#helm-users</a> <em>(slack)</em></dd>
      <dd><a href="https://lists.cncf.io/g/cncf-helm/topics">Mailing List</a></dd>
      <dd><a href="https://github.com/cncf/artwork/tree/master/projects/helm">Logos</a> &amp; <a href="https://github.com/helm/community/tree/main/art">Art</a></dd>
      <dd><a href="https://twitter.com/helmpack">Twitter</a></dd>
    </dl>
  </div>

  <div class="columns has-text-left cncf-wrap">
    <div class="column is-two-thirds">
      <a href="https://www.cncf.io/" title="Cloud Native Computing Foundation" target="_blank">
        <p class="lead">私たちは Cloud Native Computing Foundation の Graduated プロジェクトです。</p>
      </a>
    </div>

    <div class="column is-one-third has-text-right">
      <a href="https://www.cncf.io/" title="Cloud Native Computing Foundation" target="_blank">
        <img src="/img/cncf-white.svg" alt="We are a Cloud Native Computing Foundation project" class="">
      </a>
    </div>
  </div>

  <hr />

  <div class="copyright">
    <p>
      &copy; Helm Authors 2024 | Documentation distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a>
    </p>

    <p>
      &copy; 2024 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage</a> page.
    </p>
  </div>
</section>



    
    

    











































<script src="/js/jquery.min.91911616059b1420d1a7e93cdb684177d9a8bcef473731743e5f72a796662698.js" integrity="sha256-kZEWFgWbFCDRp&#43;k822hBd9movO9HNzF0Pl9yp5ZmJpg="></script>




<script src="/js/bundle.min.019ebc0ad20ee895d8c4abd8ac9285f0dff63d29231c6ace4e5d022ea590e038.js" integrity="sha256-AZ68CtIO6JXYxKvYrJKF8N/2PSkjHGrOTl0CLqWQ4Dg="></script>



<script async src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js" onload="docsearch({
  apiKey: '8bca76b0664b04581dc9f9854e844a90',
  indexName: 'helm',
  inputSelector: '#q',
  debug: false // Set debug to true if you want to inspect the dropdown
  })"></script>


    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42867143-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
